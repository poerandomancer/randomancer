/* v0.5.3.1 */
/* v0.5.2 */
:root{
  --bg: #0e0e10;
  --ink: #e4e0d8;
  --muted: #a7a19a;
  --gold: #c8a86b;
  --silver: #b7b9c4;
  --panel: rgba(10,10,12,.86);
  --edge: rgba(200,168,107,.35);
  --radius: 16px;
}

*{ box-sizing:border-box; }

html,body{
  margin:0;
  height:100%;
  background: var(--bg) url('images/background.png') center/cover no-repeat fixed;
  color:var(--ink);
  font-family:'Cormorant Garamond',serif;
}

.intro-screen{
  position:fixed;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.6) 0%, rgba(0,0,0,0.85) 100%);
  z-index:50;
  text-align:center;
  transition:opacity .7s ease, visibility .7s ease;
}
.intro-screen.fade-out{ opacity:0; visibility:hidden; }
.intro-content{ max-width:720px; padding:2rem; }
.intro-content p{
  font-family:'Cormorant Infant',serif;
  font-style:italic;
  font-size:1.7rem;
  color:var(--gold);
  text-shadow:0 0 8px rgba(0,0,0,0.8);
  margin-bottom:2rem;
}

.asc-art{
  position:fixed; inset:0; opacity:0; pointer-events:none;
  transition:opacity .5s ease;
  background-image:
    linear-gradient(135deg, rgba(0,0,0,0.25), rgba(0,0,0,0.6)),
    var(--asc-img);
  background-position:center; background-size:cover; background-repeat:no-repeat;
  filter:saturate(.9) brightness(1.05);
}
.asc-art.show{ opacity:.92; }

#app.hidden{ display:none; }
.fade-in{ animation:fadeIn .7s ease forwards; }
@keyframes fadeIn{ from{opacity:0;} to{opacity:1;} }

#app{
  position:relative; min-height:100%;
  backdrop-filter:blur(2px);
  background:rgba(0,0,0,.28);
}

header{
  text-align:center;
  padding:3rem 1rem 1.25rem;
  text-shadow:0 1px 2px rgba(0,0,0,.6);
}

.title{
  letter-spacing:.04em;
  font-weight:600;
  margin:0 0 .25rem;
  font-size:1.9rem;
  color:var(--gold);
}

.subtitle{
  font-style:italic;
  font-weight:400;
  color:var(--silver);
  margin-top:-0.2rem;
  margin-bottom:0.6rem;
  position:relative;
}
.subtitle::after{
  content:"";
  display:block;
  height:4px;
  width:65%;
  margin:0.6rem auto 1.1rem;
  background:
    radial-gradient(circle at left, transparent 70%, rgba(0,0,0,0.9) 100%),
    radial-gradient(circle at right, transparent 70%, rgba(0,0,0,0.9) 100%),
    linear-gradient(90deg, transparent, var(--gold), transparent);
  background-blend-mode:overlay;
  border-radius:50%;
  filter: drop-shadow(0 0 4px rgba(200,168,107,.4));
}

.build-name{
  margin:.2rem 0 0;
  font-size:clamp(1.2rem,2.6vw,1.9rem);
  color:var(--gold);
  font-family:'Cormorant Infant',serif;
  font-style:italic;
  letter-spacing:.06em;
}

.flavor{
  margin:.35rem auto .75rem;
  color:var(--muted);
  font-family:'Cormorant Infant',serif;
  font-style:italic;
  max-width:60ch;
  font-size:1.1rem;
}

.roll-btn{
  margin-top:.5rem; padding:.7rem 1.1rem;
  border-radius:var(--radius);
  border:1px solid var(--edge);
  background:rgba(24,24,26,.55);
  color:var(--ink);
  cursor:pointer;
}

main{ max-width:860px; margin:0 auto; padding:1.25rem; }

.panel{
  position:relative; background:var(--panel);
  border:1px solid var(--edge);
  border-radius:var(--radius);
  padding:1rem 1.25rem 1.25rem;
  box-shadow:0 6px 20px rgba(0,0,0,.25);
  overflow:hidden;
}
.panel::after{
  content:""; position:absolute; inset:-1px; pointer-events:none;
  background-image: var(--ailment-overlay-1, none), var(--ailment-overlay-2, none);
  background-blend-mode: screen, normal; mix-blend-mode: normal;
}

.sect{ padding:.25rem 0; }
.sect-head{ margin-bottom:.5rem; position:relative; }
.sect-head .underline{
  height:1px; width:120px;
  background:linear-gradient(90deg, var(--gold), transparent);
  margin:.25rem 0 .4rem;
}
.sect h3{ margin:0 0 .1rem; font-weight:600; color:var(--silver); letter-spacing:.02em; }
.sub{ margin:0; color:var(--muted); font-size:.95rem; }
.gold.subtle{
  height:1px; border:0;
  background:linear-gradient(90deg, transparent, var(--gold), transparent);
  margin:.9rem 0; opacity:.6;
}
.grid{ display:grid; gap:.65rem .75rem; }
.grid.two{ grid-template-columns:repeat(2,minmax(0,1fr)); }
.grid .wide{ grid-column:1 / -1; }
.label{ display:inline-block; min-width:9rem; color:var(--gold); letter-spacing:.02em; margin-right:.25rem; }
#weapons,#ailments,#tactics,#defense,#defstrat{ font-weight:600; }
.foot{ text-align:center; padding:1.25rem 1rem 3rem; color:var(--muted); }
.hidden{ display:none; }

/* === v0.5: Attribute Balance Visualization === */
#balance-bar {
  height: 20px;
  border-radius: 12px;
  overflow: hidden;
  display: flex;
  margin: .6rem 0 .25rem;
  box-shadow: 0 0 8px rgba(0,0,0,0.4);
}

.balance-str { background: #b03030; }   /* Strength — red */
.balance-dex { background: #2d7a2d; }   /* Dexterity — green */
.balance-int { background: #2f4f9d; }   /* Intelligence — blue */

#balance-text {
  text-align: center;
  font-size: .95rem;
  color: var(--muted);
  margin-top: .25rem;
}

/* === v0.5 visual fix: ensure panel overlay is visible === */
.panel::after{
  opacity:.55;
  transition: opacity .3s ease;
}

/* === v0.5 visualfix4: dynamic blended Balance bar === */
#balance-bar {
  position: relative;
  height: 20px;
  border-radius: 12px;
  overflow: hidden;
  margin: .6rem 0 .25rem;
  box-shadow: 0 0 10px rgba(0,0,0,0.6);
  background: linear-gradient(90deg,
    rgba(122,58,58,0.78) 0%,
    rgba(91,122,74,0.78) 50%,
    rgba(75,95,143,0.78) 100%);
}
#balance-bar::before,
#balance-bar::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 16%;
  pointer-events: none;
}
#balance-bar::before {
  left: 0;
  background: linear-gradient(90deg, rgba(0,0,0,0.9), transparent);
}
#balance-bar::after {
  right: 0;
  background: linear-gradient(270deg, rgba(0,0,0,0.9), transparent);
}

/* === v0.5_visualfix5 layering === */
.panel { position: relative; z-index: 1; }
.panel::after { z-index: 0; }

/* === v0.5_visualfix5: glowing Balance bar === */
#balance-bar {
  position: relative;
  height: 10px;
  border-radius: 10px;
  overflow: hidden;
  margin: .8rem 0 .25rem;
  box-shadow: 0 0 10px rgba(0,0,0,0.8), 0 0 20px rgba(255,255,255,0.05) inset;
  background: radial-gradient(ellipse at center,
    rgba(0,0,0,0.25) 0%, rgba(0,0,0,0.6) 100%);
}
#balance-bar::before,
#balance-bar::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 16%;
  pointer-events: none;
}
#balance-bar::before {
  left: 0;
  background: linear-gradient(90deg, rgba(0,0,0,0.9), transparent);
}
#balance-bar::after {
  right: 0;
  background: linear-gradient(270deg, rgba(0,0,0,0.9), transparent);
}
#balance-bar.glow::before {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background: var(--balance-gradient);
  filter: blur(8px) brightness(1.3);
  mix-blend-mode: screen;
  opacity: 0.85;
}

/* === v0.5_visualfix11 layering and balance === */
.panel { position: relative; z-index: 1; }
.panel::after { position: absolute; inset: 0; z-index: -1; }
.panel > * { position: relative; z-index: 1; }

#balance-bar {
  position: relative;
  height: 10px;
  border-radius: 10px;
  overflow: hidden;
  margin: .8rem 0 .25rem;
  background: var(--balance-gradient);
  box-shadow: 0 0 8px rgba(0,0,0,0.7);
}
#balance-bar.glow::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--balance-gradient);
  filter: blur(6px) brightness(1.2);
  mix-blend-mode: screen;
  opacity: 0.9;
  z-index: 0;
  box-shadow:
    0 0 6px rgba(255,215,120,0.3),
    0 0 14px rgba(255,200,80,0.25),
    0 0 22px rgba(255,190,60,0.15);
}
#balance-bar::before,
#balance-bar::after {
  content: "";
  position: absolute;
  top: 0;
  bottom: 0;
  width: 14%;
  pointer-events: none;
  z-index: 2;
}
#balance-bar::before {
  left: 0;
  background: linear-gradient(90deg, rgba(0,0,0,0.9), transparent);
}
#balance-bar::after {
  right: 0;
  background: linear-gradient(270deg, rgba(0,0,0,0.9), transparent);
}


/* === v0.5.1: Recommended Skills section === */
.skills-grid { margin-top: .25rem; }
.skill-card {
  border-radius: 10px;
  padding: .8rem 1rem;
  background: rgba(20,20,24,0.75);
  border: 1px solid var(--edge);
  box-shadow: 0 0 6px rgba(0,0,0,0.4);
  transition: box-shadow .2s ease, border-color .2s ease;
}
.skill-title { margin: 0 0 .2rem; color: var(--gold); font-weight: 600; }
.skill-desc { margin: 0 0 .35rem; font-style: italic; color: var(--muted); }
.skill-tags, .support-tags {
  display:block;
  font-size:.9rem;
  color:var(--muted);
  opacity:.9;
  margin:.2rem 0 .2rem;
}
.req-line { font-size:.9rem; color:var(--silver); opacity:.85; margin:.1rem 0 .3rem; }
.supports-wrap { margin-top: .5rem; border-top: 1px dashed rgba(200,168,107,0.25); padding-top: .5rem; }
.support-item {
  border-radius: 8px;
  padding: .5rem .6rem;
  margin: .4rem 0;
  border: 1px solid var(--edge);
  background: rgba(14,14,16,0.6);
}
.support-title { margin: 0 0 .15rem; font-weight: 600; color: var(--silver); }
.support-desc { margin: 0; font-size:.9rem; color:var(--muted); }

/* Attribute glows (active skills) */
.skill-card.str { border-color: rgba(176,48,48,0.7); box-shadow: 0 0 8px rgba(176,48,48,0.25); }
.skill-card.dex { border-color: rgba(45,122,45,0.7); box-shadow: 0 0 8px rgba(45,122,45,0.25); }
.skill-card.int { border-color: rgba(47,79,157,0.7); box-shadow: 0 0 8px rgba(47,79,157,0.25); }
.skill-card.hybrid { border: 1px solid transparent; border-image: linear-gradient(90deg,#b03030,#2d7a2d,#2f4f9d) 1; box-shadow: 0 0 10px rgba(255,255,255,0.05), 0 0 12px rgba(200,168,107,0.05) inset; }

/* Dimmer outlines for supports */
.support-item.str { border-color: rgba(176,48,48,0.5); }
.support-item.dex { border-color: rgba(45,122,45,0.5); }
.support-item.int { border-color: rgba(47,79,157,0.5); }
.support-item.hybrid { border:1px solid transparent; border-image: linear-gradient(90deg,#b03030,#2d7a2d,#2f4f9d) 1; }

/* ensure long lists remain tidy */
.supports-wrap { max-height: 280px; overflow: auto; scrollbar-width: thin; }


/* v0.5.3.1: balance bar richer + fade ends */
#balance-bar{
  height:6px;
  border-radius:12px;
  background: var(--balance-gradient);
  position:relative;
  box-shadow: 0 0 6px rgba(255,215,120,0.25), 0 0 14px rgba(200,168,107,0.22);
  -webkit-mask-image: linear-gradient(90deg, transparent 0%, black 10%, black 90%, transparent 100%);
          mask-image: linear-gradient(90deg, transparent 0%, black 10%, black 90%, transparent 100%);
}
#balance-bar::before{
  content:"";
  position:absolute; inset:0;
  background: var(--balance-gradient);
  filter: saturate(1.2) brightness(0.9) contrast(1.1) blur(6px);
  opacity:.85; mix-blend-mode: screen;
  border-radius:12px;
}
.version-label{ text-align:center; font-size:.85rem; opacity:.8; color:#ccc; margin-top:10px; }

/* === v0.5.3.6 Brass Glow Enhancement === */
#balance-bar {
  position: relative;
  height: 6px;
  border-radius: 4px;
  background: var(--balance-gradient);
  box-shadow:
    0 0 12px rgba(212,170,80,0.65),
    0 0 24px rgba(180,130,50,0.45),
    0 0 36px rgba(140,90,20,0.25);
  -webkit-mask-image: linear-gradient(90deg, transparent 0%, black 10%, black 90%, transparent 100%);
          mask-image: linear-gradient(90deg, transparent 0%, black 10%, black 90%, transparent 100%);
}
#balance-bar::before {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: var(--balance-gradient);
  opacity: 0.8;
  filter: blur(10px);
  pointer-events: none;
}



/* ===== v0.6_init.1: Unified Tag System Enhancement ===== */
.skill-tags, .support-tags, .spirit-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  margin-top: 0.3rem;
}
.tag-pill {
  display: inline-block;
  background: rgba(212,170,80,0.22);
  border: 1px solid rgba(212,170,80,0.45);
  color: #e5cc99;
  border-radius: 999px;
  font-size: 0.8rem;
  padding: 0.1rem 0.5rem;
  letter-spacing: 0.02em;
  text-transform: lowercase;
  box-shadow: 0 0 3px rgba(212,170,80,0.25);
}


/* ===== v0.6_init.2: Tag Pills Visibility Overrides ===== */
.skill-tags, .support-tags, .spirit-tags {
  display: flex !important;
  flex-wrap: wrap;
  gap: 0.3rem;
  margin-top: 0.3rem;
  color: inherit !important;
  opacity: 1 !important;
}
.tag-pill {
  display: inline-block;
  background: rgba(212,170,80,0.25);
  border: 1px solid rgba(212,170,80,0.55);
  color: #e6d8a5 !important;
  border-radius: 999px;
  font-size: 0.8rem;
  padding: 0.1rem 0.55rem;
  letter-spacing: 0.02em;
  text-transform: lowercase;
  box-shadow: 0 0 6px rgba(212,170,80,0.4);
  position: relative;
  z-index: 3;
}



/* ===== v0.6_init.3: Tag Visibility Refinement ===== */
.skill-tags, .support-tags, .spirit-tags {
  display: flex !important;
  flex-wrap: wrap;
  gap: 0.3rem;
  margin-top: 0.3rem;
  color: inherit !important;
  opacity: 1 !important;
}
.tag-pill {
  display: inline-block;
  background: rgba(212,170,80,0.25);
  border: 1px solid rgba(212,170,80,0.55);
  color: #e6d8a5 !important;
  border-radius: 999px;
  font-size: 0.8rem;
  padding: 0.1rem 0.55rem;
  letter-spacing: 0.02em;
  text-transform: lowercase;
  box-shadow: 0 0 6px rgba(212,170,80,0.4);
  position: relative;
  z-index: 3;
}


/* ===== v0.6_init.4: Spirit Tag Integration ===== */
.spirit-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  margin-top: 0.3rem;
}



/* ===== v0.6_init.5: Active Gem Tag Integration ===== */
.active-tags {
  display: flex;
  flex-wrap: wrap;
  gap: 0.3rem;
  margin-top: 0.3rem;
}


/* ===== v0.6_init.10: Granted Skills Display ===== */
.granted-skills {
  margin-top: 0.4rem;
  padding: 0.3rem 0.5rem;
  border-left: 2px solid #c8a04e;
  font-size: 0.9em;
  opacity: 0.9;
}
.granted-title {
  font-weight: bold;
  color: #d8b46e;
  margin-bottom: 0.2rem;
}
.granted-skill {
  margin-bottom: 0.2rem;
}
.granted-name {
  font-weight: 600;
  color: #e6d28c;
}
.granted-desc {
  color: #bcb09a;
  margin-left: 0.25rem;
}

/* === v0.6.4: Cohesion Slider + Skill Cards === */
.cohesion-slider{ margin:1.2rem auto; width:min(720px,90%); text-align:center; color:var(--gold); }
.cohesion-slider input[type=range]{ width:100%; appearance:none; height:6px; border-radius:6px; background:linear-gradient(90deg, rgba(212,170,80,0.4), rgba(212,170,80,0.9)); outline:none; cursor:pointer; box-shadow:0 0 6px rgba(212,170,80,0.3); }
.cohesion-slider .mode-labels{ display:flex; justify-content:space-between; font-size:.85rem; opacity:.8; margin-top:.2rem; color:var(--muted); }

.skill-tags, .support-tags { display:flex; flex-wrap:wrap; gap:.3rem; }
.tag-pill{ display:inline-block; background: rgba(212,170,80,0.22); border:1px solid rgba(212,170,80,0.45); color:#e5cc99; border-radius:999px; font-size:.8rem; padding:.1rem .5rem; letter-spacing:.02em; text-transform:lowercase; box-shadow:0 0 3px rgba(212,170,80,0.25); }

.supports-wrap { margin-top:.5rem; border-top:1px dashed rgba(200,168,107,0.25); padding-top:.5rem; }
.support-item { border-radius:8px; padding:.5rem .6rem; margin:.35rem 0; border:1px solid var(--edge); background:rgba(14,14,16,0.6); }
.support-title { margin:0 0 .15rem; font-weight:600; color:var(--silver); }
.support-desc { margin:0; font-size:.9rem; color:var(--muted); }
.req-line { font-size:.9rem; color:var(--silver); opacity:.85; margin:.1rem 0 .3rem; }

/* v0.6.7 overlay beneath content via pseudo-element */
.panel{ position:relative; z-index:1; }
.panel::before{
  content:'';
  position:absolute;
  inset:0;
  background: var(--overlay-gradient, linear-gradient(225deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.75) 100%));
  z-index:0;
  pointer-events:none;
}
.panel > *{ position:relative; z-index:1; }

/* panel overlay kept: use --overlay-gradient set by JS */
.panel::before{
  content:'';
  position:absolute;
  inset:0;
  background:var(--overlay-gradient,linear-gradient(135deg, rgba(0,0,0,0) 0%, rgba(0,0,0,.85) 100%));
  z-index:0;
  pointer-events:none;
}
.panel > * { position: relative; z-index: 1; }

/* build name + subtext (restored) */
#build-name{
  font-family:"Cinzel Decorative",serif;
  color:#d5b66a;
  font-size:1.6rem;
  letter-spacing:.06em;
  text-transform:uppercase;
  margin:.6rem 0 .15rem;
}
#build-subtext{
  font-style:italic;
  color:rgba(235,235,235,.85);
  margin:0 0 1rem;
}

/* “Grants” callout (baseline look) */
.grants-callout{
  border-left:3px solid rgba(213,182,106,.65);
  padding:.5rem .75rem;
  background:rgba(0,0,0,.18);
  margin:.25rem 0 .6rem;
}
.grants-title{
  color:#d5b66a;
  font-weight:700;
  margin-bottom:.25rem;
  letter-spacing:.02em;
}
.grants-body .granted-name{
  font-weight:700;
  color:#e9d8a6;
}

/* Req. Weapon line */
.req-block{
  border-top:1px dashed rgba(213,182,106,.35);
  margin-top:.75rem;
  padding-top:.5rem;
  display:grid;
  grid-template-columns:140px 1fr;
  gap:.5rem;
}
.req-label{ color:#d5b66a; font-style:italic; }
.req-value{ color:rgba(235,235,235,.95); }

/* tag pill fallback */
.tag-pill{
  display:inline-block; padding:.2rem .6rem; border-radius:999px;
  border:1px solid rgba(213,182,106,.35);
  color:rgba(235,235,235,.92);
  margin:.15rem .25rem .15rem 0;
  font-size:.85rem; white-space:nowrap;
}

/* Keep tags above supports reliably */
.skill-tags { display:block; clear: both; margin-bottom: .35rem; }
.supports { display:block; clear: both; }
/* Scroll panel for supports to limit card height */
.supports {
  max-height: 220px;
  overflow: auto;
  padding-right: .25rem; /* avoid scrollbar overlap */
  border-top: 1px dashed var(--edge);
  margin-top: .35rem;
}
.support-item { margin:.35rem 0; }


/* --- Multi-grant display (restored) --- */
.grants { margin:.4rem 0; }
.grants .label { font-size:.9rem; color: var(--silver); opacity:.85; display:block; margin-bottom:.25rem; }
.grant-list { display:block; }
.grant-item { border-left: 2px solid var(--edge); padding:.3rem .6rem; margin:.3rem 0; background: rgba(12,12,14,0.35); }
.grant-title { font-weight:600; color:var(--silver); margin:0 0 .1rem; }
.grant-desc { font-size:.9rem; color: var(--muted); margin:0; }


/* --- Active skill card flex + supports fill --- */
.skill-card.active { display:flex; flex-direction:column; max-height: 720px; }
.skill-card .skill-title,
.skill-card .req-block,
.skill-card .grants,
.skill-card .skill-desc,
.skill-card .skill-tags { flex: 0 0 auto; width:100%; }
.supports { flex: 1 1 auto; min-height: 0; overflow:auto; width:100%; }
/* Keep tags above supports reliably */
.skill-tags { display:block; clear: both; margin-bottom:.35rem; }
.supports { display:block; clear: both; }

/* override: let flex-fill manage height */
.supports { max-height: none; }

/* Label above supports */
/* supports label matches required weapon label */
.supports-label{ color:#d5b66a; font-style:italic; }


/* v0.7 additions */
.synergy-chip {
  display: inline-block;
  margin-left: 8px;
  padding: 2px 8px;
  font-size: 12px;
  border: 1px solid rgba(255,215,128,0.6);
  border-radius: 999px;
  background: rgba(255,215,128,0.08);
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.tag-pill.matched {
  border-color: rgba(126, 217, 87, 0.7);
  background: rgba(126, 217, 87, 0.12);
  box-shadow: 0 0 8px rgba(126, 217, 87, 0.25) inset;
  font-weight: 600;
}

/* v0.7 grants label */
.grants-label{
  color:#d5b66a;
  font-weight:700;
  margin:0 0 .25rem;
  letter-spacing:.02em;
  opacity:.95;
}


/* v0.7 grant wrap */
.grant-wrap{
  margin:.35rem 0 .5rem;
  padding:.35rem .5rem;
  background: rgba(12,12,14,0.35);
  border-left:2px solid var(--edge);
}

/* --- v0.7: Recommended Supports scroll panel --- */
.supports{
  --panel-height: 240px;
  max-height: var(--panel-height);
  overflow-y: auto;
  display: grid;
  grid-template-columns: 1fr;
  gap: 8px;
  padding: 8px;
  margin-top: 6px;
  border: 1px solid rgba(140,120,90,0.35);
  border-radius: 10px;
  background: rgba(18,18,20,0.55);
  box-shadow: inset 0 1px 2px rgba(0,0,0,0.35);
  scrollbar-gutter: stable;
}

.supports::-webkit-scrollbar { width: 10px; }
.supports::-webkit-scrollbar-thumb {
  background: rgba(120,110,90,0.55);
  border-radius: 8px;
  border: 2px solid rgba(18,18,20,0.7);
}
.supports::-webkit-scrollbar-track { background: rgba(18,18,20,0.35); }

/* Ensure cards stack cleanly inside the panel */
.supports .support-item{
  display: block;
  max-width: unset;
  margin: 0;
}

/* === v0.7 restore 0.6_release support pane behavior === */
.skill-card{
  display: flex;
  flex-direction: column;
  /* allow inner scroller to size correctly */
  min-height: 0;
}
.skill-card .supports-label{
  margin-top: .5rem;
}
.skill-card .supports{
  /* fill remaining space within card and scroll */
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;

  /* revert to 0.6_release look (no panel border/background) */
  display: block;
  background: transparent;
  border: 0;
  box-shadow: none;

  /* 0.6 style: dashed divider and top padding */
  border-top: 1px dashed rgba(200,168,107,0.25);
  padding-top: .5rem;
  padding-bottom: .25rem;
}

/* support cards spacing, consistent with 0.6 */
.supports .support-item{
  display: block;
  max-width: unset;
  margin: .4rem 0;
}

/* remove prior custom scrollbar visuals for parity with 0.6 */
.supports::-webkit-scrollbar,
.supports::-webkit-scrollbar-thumb,
.supports::-webkit-scrollbar-track{ background: transparent; border: 0; }

/* === v0.7 supports pane: fill remaining space reliably === */
.skills-grid{
  align-items: stretch;     /* ensure grid items fill the row height */
}
.skill-card{
  height: 100%;             /* allow inner flex to consume row height */
}

/* === v0.7: active gem cards fixed max-height + flex scroller === */
:root{
  --skill-card-max: 560px;
}

.skills-grid{ align-items: stretch; }

.skill-card{
  /* allow the supports area to calculate remaining space */
  display: flex;
  flex-direction: column;
  min-height: 0;
  /* key: keep cards neat and let supports scroll within */
  height: auto !important;
  max-height: var(--skill-card-max);
}

.skill-card .supports-label{ margin-top: .5rem; }

.skill-card .supports{
  flex: 1 1 auto;   /* fills remaining vertical space */
  min-height: 0;    /* critical for nested flex scrolling */
  overflow-y: auto; /* create an internal scroller */
}


/* ===== v0.7.6: Uniques bronze cards ===== */
:root{
  --unique-bronze: #c58a46;
  --unique-bronze-edge: rgba(197,138,70,0.35);
  --unique-bronze-soft: rgba(197,138,70,0.12);
}
.uniques-grid{ margin-top:.35rem; }

.unique-card {
  border-radius: 12px;
  padding: .9rem 1rem;
  background: rgba(18,18,20,0.78);
  border: 1px solid var(--unique-bronze-edge);
  box-shadow:
    0 0 0 1px rgba(0,0,0,0.35) inset,
    0 10px 24px rgba(0,0,0,0.35),
    0 0 10px var(--unique-bronze-soft) inset;
  position: relative;
}
.unique-card::before{
  content:"";
  position:absolute; inset:0; pointer-events:none;
  border-radius:12px;
  background:
    linear-gradient(180deg, rgba(197,138,70,0.14), transparent 40%, transparent 70%, rgba(197,138,70,0.08)),
    linear-gradient(90deg, rgba(197,138,70,0.12), rgba(197,138,70,0.02), rgba(197,138,70,0.12));
  mix-blend-mode:overlay; opacity:.85;
}

.unique-title { margin: 0 0 .2rem; color: var(--unique-bronze); font-weight: 700; letter-spacing:.03em; }
.unique-sub  { margin: 0 0 .4rem; font-style: italic; color: var(--muted); }

.unique-tags { display:flex; flex-wrap:wrap; gap:.3rem; margin:.25rem 0 .45rem; }
.unique-lines { margin:.25rem 0 0; font-size:.98rem; color: rgba(235,235,235,.9); line-height:1.2; }
.unique-lines .hit { color: var(--unique-bronze); font-weight: 700; text-shadow: 0 0 6px rgba(197,138,70,0.35); }

.unique-tags .tag-pill{
  background: rgba(197,138,70,0.18);
  border: 1px solid rgba(197,138,70,0.45);
  color: #e9d7b4 !important;
  text-transform: lowercase;
}
.unique-tags .tag-pill.matched{
  border-color: rgba(126,217,87,0.8);
  background: rgba(126,217,87,0.12);
  box-shadow: 0 0 8px rgba(126,217,87,0.25) inset;
  color:#dfe; font-weight: 700;
}


/* === v0.7.6_beta8d — Unique card polish === */
.unique-card{background:#12100c;border:1px solid rgba(255,200,120,.45);border-radius:14px;box-shadow:0 0 18px rgba(255,180,80,.18),inset 0 0 0 1px rgba(255,200,140,.05);overflow:hidden}
.unique-header{background:none;padding:10px 14px 8px;border-bottom:1px solid rgba(255,200,140,.12)}
.unique-name{font-weight:700;letter-spacing:.3px;color:#ffcf7a;font-size:1.05rem;line-height:1.15}
.unique-base{margin-top:2px;font-variant:small-caps;letter-spacing:.6px;color:#d7b58a;opacity:.9;font-size:.85rem}
.tags-row{display:flex;flex-wrap:wrap;gap:6px;margin:6px 14px 2px}
.unique-card .pill{margin:2px 6px 2px 0}
.unique-card .pill.match{box-shadow:0 0 0 1px rgba(255,210,140,.45),0 0 12px rgba(255,180,90,.25);filter:saturate(1.1)}
.unique-lines{padding:10px 14px 12px;color:#e4d9c9;font-size:.95rem}
.unique-line{margin:2px 0;opacity:.95}



/* === v0.7.6_beta8e — unique cards reuse gem pill styles === */
.unique-card .pill{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border:1px solid rgba(245,185,120,.55);border-radius:999px;background:radial-gradient(120% 160% at 10% 30%,rgba(140,90,35,.30) 0%,rgba(35,26,16,.45) 60%,rgba(20,14,9,.65) 100%);color:#f5e3cf;font-size:.78rem;letter-spacing:.2px;line-height:1.2}
.unique-card .pill.match{box-shadow:0 0 0 1px rgba(255,210,140,.45),0 0 12px rgba(255,180,90,.25);color:#fff2df}

/* === v0.7.6_beta8f — uniques gem-pill alias + glow === */
.unique-card .pill{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border:1px solid rgba(245,185,120,.55);border-radius:999px;background:radial-gradient(120% 160% at 10% 30%,rgba(140,90,35,.30) 0%,rgba(35,26,16,.45) 60%,rgba(20,14,9,.65) 100%);color:#f5e3cf;font-size:.78rem;letter-spacing:.2px;line-height:1.2}
.unique-card .pill.match{box-shadow:0 0 0 1px rgba(255,210,140,.45),0 0 12px rgba(255,180,90,.25);color:#fff2df}
.unique-card{background:#12100c;border:1px solid rgba(255,200,120,.45);border-radius:14px;box-shadow:0 0 18px rgba(255,180,80,.18), inset 0 0 0 1px rgba(255,200,140,.05)}
.unique-header{background:none;border-bottom:1px solid rgba(255,200,140,.12);padding:10px 14px 8px}
.unique-name{font-weight:700;letter-spacing:.3px;color:#ffcf7a;font-size:1.05rem;line-height:1.15}
.unique-base{margin-top:2px;font-variant:small-caps;letter-spacing:.6px;color:#d7b58a;opacity:.9;font-size:.85rem}
.tags-row{display:flex;flex-wrap:wrap;gap:6px;margin:6px 14px 2px}
.unique-lines{padding:10px 14px 12px;color:#e4d9c9;font-size:.95rem}
.unique-line{margin:2px 0;opacity:.95}

/* === v0.7.6_beta8h — uniques gem-pill alias + glow === */
.unique-card .pill{display:inline-flex;align-items:center;gap:6px;padding:2px 8px;border:1px solid rgba(245,185,120,.55);border-radius:999px;background:radial-gradient(120% 160% at 10% 30%,rgba(140,90,35,.30) 0%,rgba(35,26,16,.45) 60%,rgba(20,14,9,.65) 100%);color:#f5e3cf;font-size:.78rem;letter-spacing:.2px;line-height:1.2}
.unique-card .pill.match{box-shadow:0 0 0 1px rgba(255,210,140,.45),0 0 12px rgba(255,180,90,.25);color:#fff2df}
.unique-card{background:#12100c;border:1px solid rgba(255,200,120,.45);border-radius:14px;box-shadow:0 0 18px rgba(255,180,80,.18), inset 0 0 0 1px rgba(255,200,140,.05)}
.unique-header{background:none;border-bottom:1px solid rgba(255,200,140,.12);padding:10px 14px 8px}
.unique-name{font-weight:700;letter-spacing:.3px;color:#ffcf7a;font-size:1.05rem;line-height:1.15}
.unique-base{margin-top:2px;font-variant:small-caps;letter-spacing:.6px;color:#d7b58a;opacity:.9;font-size:.85rem}
.tags-row{display:flex;flex-wrap:wrap;gap:6px;margin:6px 14px 2px}
.unique-lines{padding:10px 14px 12px;color:#e4d9c9;font-size:.95rem}
.unique-line{margin:2px 0;opacity:.95}



/* === v0.7.6_beta8i — uniques polish === */
.unique-line.meta{opacity:.7;color:#cdb89f;font-size:.92rem}
.unique-card .pill[data-cat="Tactic"].match{box-shadow:0 0 0 1px rgba(255,210,140,.55),0 0 12px rgba(255,180,90,.35)}
.unique-card .pill[data-cat="Ailment"].match{box-shadow:0 0 0 1px rgba(170,220,255,.45),0 0 12px rgba(140,200,255,.30)}
.unique-card .pill[data-cat="DefensiveStrategy"].match{box-shadow:0 0 0 1px rgba(200,255,170,.45),0 0 12px rgba(170,240,150,.28)}


/* --- Mobile polish pack (v0.7.9_beta2m) --- */
html { font-size: clamp(14px, 1.8vw, 16px); }
h1 { font-size: clamp(24px, 5.5vw, 40px); }
h2 { font-size: clamp(18px, 3.5vw, 28px); }

.grid.two { display: grid; grid-template-columns: repeat(2, minmax(0,1fr)); gap: 14px; }
@media (max-width: 960px) {
  .grid.two { grid-template-columns: 1fr; gap: 12px; }
}

@media (max-width: 960px) {
  .skill-card, .unique-card { padding: 12px; }
  .unique-lines div, .skill-lines div { line-height: 1.3; }
}

.skill-tags, .unique-tags { display:flex; flex-wrap:wrap; gap: 6px; }
.tag-pill { padding: 2px 8px; border-radius: 999px; font-size: 12px; }
@media (max-width: 480px) {
  .tag-pill { font-size: 11px; padding: 2px 6px; }
}

@media (max-width: 960px) {
  .sect { margin: 16px 0; }
  .sect .sect-head .underline { margin-top: 6px; }
}

.roll-btn { min-height: 44px; display: inline-flex; align-items: center; gap: .5rem; }
.roll-btn .btn-ico{ width:18px; height:18px; display:inline-block; object-fit:contain; filter: drop-shadow(0 0 2px rgba(0,0,0,.6)); }
.roll-sticky { position: sticky; bottom: 16px; z-index: 50; display:flex; justify-content:center; pointer-events:none; }
.roll-sticky .roll-btn { pointer-events:auto; border-radius: 999px; padding: 10px 16px; }
@supports (padding: max(0px)) {
  .roll-sticky { padding-bottom: max(16px, env(safe-area-inset-bottom)); }
}

img, video { max-width: 100%; height: auto; }

@media (max-width: 640px) {
  .background-vignette { opacity: .5; }
}
@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

.container { width: min(100%, 1100px); margin: 0 auto; padding: 0 16px; }

/* Divider styling + spacing */
:root { --section-gap: 24px; }
.ornate-divider.gold.unique-divider{
  height: 1px;
  background: linear-gradient(90deg, rgba(0,0,0,0), rgba(202,164,95,.38), rgba(0,0,0,0));
  opacity: .9;
  margin: var(--section-gap) 0;
}
#uniques-section.sect { margin-top: 0; }

/* Info Lightbox */
.rm-info-fab{
  position: fixed;
  top: max(16px, env(safe-area-inset-top));
  right: max(16px, env(safe-area-inset-right));
  z-index: 120;
  width: 34px; height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(202,164,95,.7);
  background: radial-gradient( circle at 30% 30%, rgba(202,164,95,.22), rgba(0,0,0,.6) );
  color: rgba(255, 230, 180, .92);
  font-weight: 700;
  font-size: 16px;
  line-height: 32px;
  text-align: center;
  cursor: pointer;
  box-shadow: 0 0 8px rgba(0,0,0,.45);
  transition: transform .12s ease, box-shadow .12s ease, background .12s ease;
}
.rm-info-fab:hover{ transform: translateY(-1px); box-shadow: 0 2px 12px rgba(0,0,0,.55); }
.rm-info-fab:focus{ outline: none; box-shadow: 0 0 0 2px rgba(202,164,95,.45); }

.rm-info-overlay[hidden]{ display:none; }
.rm-info-overlay{
  position: fixed; inset:0; z-index: 110;
}
.rm-info-backdrop{
  position:absolute; inset:0;
  background: rgba(0,0,0,.6);
  backdrop-filter: blur(2px);
}
.rm-info-dialog{
  position:absolute; inset: 10% 50% auto 50%;
  transform: translateX(-50%);
  width: min(720px, calc(100% - 32px));
  background: rgba(20,18,15,.96);
  border: 1px solid rgba(202,164,95,.4);
  box-shadow: 0 10px 40px rgba(0,0,0,.5), inset 0 0 0 1px rgba(0,0,0,.4);
  border-radius: 14px;
  color: #f3e8d0;
  max-height: 78vh;
  overflow: hidden;
}
@media (max-width: 640px){
  .rm-info-dialog{ inset: 8% 50% auto 50%; width: calc(100% - 24px); }
}
.rm-info-head{
  display:flex; align-items:center; justify-content:space-between;
  padding: 12px 14px; border-bottom: 1px solid rgba(202,164,95,.25);
  background: linear-gradient(180deg, rgba(202,164,95,.08), rgba(0,0,0,0));
}
.rm-info-head h3{ margin:0; font-size: 18px; letter-spacing:.3px; }
.rm-info-close{
  appearance:none; background:transparent; border:none; color:#f3e8d0; font-size:18px;
  width:28px; height:28px; border-radius:8px; cursor:pointer;
}
.rm-info-close:hover{ background: rgba(255,255,255,.06); }
.rm-info-content{
  padding: 14px;
  overflow:auto;
  max-height: calc(78vh - 52px);
}
.rm-info-content h4{ margin: 12px 0 6px; font-size: 16px; color: #f7e7c3; letter-spacing:.2px; }
.rm-info-content p{ margin: 8px 0; }
.rm-info-content a{ color: #ffd58f; text-decoration: underline; text-decoration-color: rgba(255,213,143,.45); }
.rm-disclaimer small{ font-size: 12px; opacity: .85; line-height: 1.35; display:block; }


/* === Info Lightbox extra polish (v0.7.9_beta2n) === */
.rm-info-content .rm-info-hr{
  height:1px; border:0; margin: 12px 0 8px;
  background: linear-gradient(90deg, rgba(0,0,0,0), rgba(202,164,95,.35), rgba(0,0,0,0));
  opacity: .9;
}
